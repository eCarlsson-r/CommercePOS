<div class="a4-page print-area p-12 bg-white mx-auto text-gray-900">
  <header class="flex justify-between items-center border-b-4 border-primary pb-6 mb-8">
    <div class="flex gap-4 items-center">
       <div class="w-12 h-12 bg-primary rounded-xl flex items-center justify-center text-white font-black text-2xl">P</div>
       <div>
         <h1 class="text-xl font-black uppercase">Purchase Summary</h1>
         <p class="text-xs font-bold text-gray-500 uppercase">{{ supplierName() }}</p>
       </div>
    </div>
    <div class="text-right">
      <p class="text-xs font-bold">Network Wide: {{ branchSpend().length }} Branches</p>
      <p class="text-[10px] text-gray-400 uppercase tracking-widest">
        @if (startDate() === endDate()) {
          {{ startDate() | date:'dd MMMM yyyy' }}
        } @else {
          {{ startDate() | date:'dd MMMM yyyy' }} to {{ endDate() | date:'dd MMMM yyyy' }}
        }
      </p>
    </div>
  </header>

  <div class="grid grid-cols-3 gap-6 mb-10">
    <div class="border-2 border-gray-100 p-6 rounded-2xl">
      <p class="text-[9px] font-black text-gray-400 uppercase mb-1">Total Spend</p>
      <p class="text-xl font-black text-primary">Rp {{ totalSpend() | number }}</p>
    </div>
    <div class="border-2 border-gray-100 p-6 rounded-2xl">
      <p class="text-[9px] font-black text-gray-400 uppercase mb-1">Total Orders</p>
      <p class="text-xl font-black text-gray-800">{{ totalOrders() }} POs</p>
    </div>
    <div class="border-2 border-gray-100 p-6 rounded-2xl">
      <p class="text-[9px] font-black text-gray-400 uppercase mb-1">Avg Order Value</p>
      <p class="text-xl font-black text-gray-800">Rp {{ (totalSpend() / totalOrders()) | number }}</p>
    </div>
  </div>

  <section>
    <h3 class="text-xs font-black uppercase mb-4 border-b pb-2">Purchase Audit Log</h3>
    <table class="w-full text-[10px]">
      <thead>
        <tr class="bg-gray-900 text-white font-black uppercase">
          <th class="p-2 text-left">SKU</th>
          <th class="p-2 text-left">Product</th>
          <th class="p-2 text-center">Qty</th>
          <th class="p-2 text-right">Unit Cost</th>
          <th class="p-2 text-right">Total</th>
        </tr>
      </thead>
      <tbody>
        @for (p of purchaseItems(); track p.id) {
          <tr class="border-b">
            <td class="p-2 font-mono">{{ p.sku }}</td>
            <td class="p-2 font-bold">{{ p.name }}</td>
            <td class="p-2 text-center">{{ p.quantity }}</td>
            <td class="p-2 text-right">Rp {{ p.purchase_price | number }}</td>
            <td class="p-2 text-right font-black">Rp {{ (p.quantity * p.purchase_price) | number }}</td>
          </tr>
        }
      </tbody>
    </table>
  </section>

  <section class="mt-8">
    <h3 class="text-xs font-black uppercase mb-4 border-b pb-2">Branch Allocation</h3>
    <div class="grid grid-cols-2 gap-x-12 gap-y-2">
      @for (branch of branchSpend(); track branch.id) {
        <div class="flex justify-between items-center py-2 border-b border-dashed border-gray-100">
          <span class="text-xs font-medium text-gray-600">{{ branch.name }}</span>
          <span class="text-xs font-black">Rp {{ branch.total | number }}</span>
        </div>
      }
    </div>
  </section>
</div>