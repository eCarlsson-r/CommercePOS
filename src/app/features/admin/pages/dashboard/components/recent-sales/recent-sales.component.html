<div class="bg-white rounded-2xl border border-border shadow-sm overflow-hidden flex flex-col h-full">
  <div class="p-6 border-b border-border flex items-center justify-between bg-white/50">
    <div>
      <h3 class="font-bold text-foreground">Recent Transactions</h3>
      <p class="text-xs text-muted-foreground">Latest invoices from your branch</p>
    </div>
    <button [routerLink]="/sales" class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
      View All
      <lucide-icon name="arrow-right" class="w-3 h-3"></lucide-icon>
    </button>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full text-left border-collapse">
      <thead class="bg-primary/5 text-[10px] uppercase text-primary font-bold tracking-wider">
        <tr>
          <th class="px-6 py-4">Invoice</th>
          <th class="px-6 py-4">Grand Total</th>
          <th class="px-6 py-4">Payment</th>
          <th class="px-6 py-4 text-right">Action</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-border">
        @for (sale of saleService.recentSales().slice(0, 5); track sale.id) {
          <tr class="hover:bg-muted/30 transition-colors group">
            <td class="px-6 py-4">
              <span class="font-mono text-xs font-bold text-foreground">{{ sale.invoice_number }}</span>
              <p class="text-[10px] text-muted-foreground">{{ sale.created_at | date:'MMM d, HH:mm' }}</p>
            </td>
            <td class="px-6 py-4">
              <span class="font-bold text-sm text-foreground">
                {{ sale.grand_total | currency:'IDR':'symbol':'1.0-0' }}
              </span>
            </td>
            <td class="px-6 py-4">
              <div class="flex flex-wrap gap-1">
                @for (pay of sale.payments; track $index) {
                  <span class="text-[10px] bg-secondary/20 text-primary border border-primary/10 px-2 py-0.5 rounded-md font-medium">
                    {{ pay.payment_method }}
                  </span>
                }
              </div>
            </td>
            <td class="px-6 py-4 text-right">
              <button class="p-2 hover:bg-primary hover:text-white rounded-full text-primary transition-all shadow-sm group-hover:shadow">
                <lucide-icon name="eye" class="w-4 h-4"></lucide-icon>
              </button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="4" class="px-6 py-20 text-center">
              <div class="flex flex-col items-center opacity-40">
                <lucide-icon name="shopping-cart" class="w-10 h-10 mb-2"></lucide-icon>
                <p class="text-sm italic">No transactions recorded today.</p>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>